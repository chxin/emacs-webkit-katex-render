#+TITLE: ~webkit-katex-render~: an instant Latex Previewer for Emacs


* Demo
:PROPERTIES:
:ID:       EC3438CD-4BEC-47A3-97CC-0CC32EEFC3B4
:END:
[[./demo.png]]
Please checkout the demo [[https://youtu.be/jPz-gUWbIaw][video]].

* Preparation
:PROPERTIES:
:ID:       0E541285-95C1-40E8-80A0-6878924D6D15
:END:
You need emacs compiled with ~xwidget~ support.

If you are on mac OS, you need to apply this [[https://gist.github.com/fuxialexander/0231e994fd27be6dd87db60339238813][patch]] to emacs master branch and compile using the following commands:
#+BEGIN_SRC shell
./autogen.sh
./configure --with-xwidgets --with-ns --with-gnutls --with-imagemagick --with-modules --with-rsvg --with-xml2
make install
#+END_SRC
If you are on Linux, maybe you can follow this [[https://jiegec.github.io/programming/2016/02/18/building-emacs-git-version-with-xwidgets-and-modules-in-archlinux/][blog post]].

* Install
:PROPERTIES:
:ID:       91137E8C-FC3C-4C77-8BA5-85699373C683
:END:
- ~use-package~
#+BEGIN_SRC elisp
(use-package webkit-katex-render
  :init
  ;; if you use doom-emacs
  (setq webkit-katex-render--background-color (doom-color 'bg))
  ;; if you want to set a different path to the html client
  (setq webkit-katex-render--client-path "PATH/TO/CLIENT.html")
  ;; if you want to add your customized ~math-at-point~ function
  (setq webkit-katex-render--math-at-point-function 'function))
#+END_SRC
- My config for ~doom-emacs~
#+BEGIN_SRC elisp
(def-package! webkit-katex-render :load-path "~/Source/playground/emacs-webkit-katex-render"
  :commands (webkit-katex-render-mode)
  :config
  (setq webkit-katex-render--background-color (doom-color 'bg)))
#+END_SRC

* Usage
:PROPERTIES:
:ID:       87A6B5A3-08F1-4625-8E87-6E846A0A8B22
:END:
- ~M-x webkit-katex-render-mode~ to start the minor mode
- Move your cursor to a latex fragment (currently in Org mode)
- Try look around and type equations!

* Plans
:PROPERTIES:
:ID:       DBB49E9A-B377-43B7-B4CD-48E21736C37E
:END:
See [[https://github.com/fuxialexander/emacs-webkit-katex-render/issues?q=is%3Aissue+is%3Aopen+label%3Aenhancement][issue board]].

